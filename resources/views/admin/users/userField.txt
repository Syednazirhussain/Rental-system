    <input type="hidden" id="@if(isset($user)){{ $user->id }}@endif" class="userId">

    <input type="hidden" name="permissions" id="per">

    <div class="col-sm-12 form-group" id="permission">
        <label for="user_role_codes">Permission</label>
        <select class="form-control select2-example" name="user_permission" id="modules" multiple>
            @foreach($technicalSettings as $key => $value)
                @if(isset($permissions))
                    <option  <?php foreach ($permissions as $per) { if ($per == $key) { echo "selected"; } } ?>   value="{{ $key }}" >{{$value}}</option>
                @else
                    <option value="{{$key}}">{{$value}}</option>
                @endif
            @endforeach
        </select>
    </div>




            $('document').ready(function(){

            var edit = "{{ (isset($user) && $user->user_role_code == 'admin_technical_support')? 1 : 0 }}";
 

            if(edit == true)
            {
                $('#permission').show();
            }
            else
            {
                $('#permission').hide();
            }

        });

        var userId = $('.userId').attr('id');

        $('#modules').on('select2:select', function (e) {
            var data = e.params.data;

            var jsObj = {
              'userId' : userId,
              'permissions' : data.id,
              'Action'     : 'Add'
            }


            if (userId == "" || userId === null) {

            }
            else
            {
              $.post("{{ route('admin.users.updateUser') }}",jsObj,function(response){
                console.log(response);
              });
            }
        });

        $('#modules').on('select2:unselect', function (e) {
            var data = e.params.data;
            
            var jsObj = {
              'userId' : userId,
              'permissions' : data.id,
              'Action'     : 'Remove'
            }

            if (userId == "" || userId === null) {

            }
            else
            {
                $.post("{{ route('admin.users.updateUser') }}",jsObj,function(response){
                  console.log(response);
                });
            }
        });




        $('#user_role_code').on('change',function(){

            var role_code = $(this).val();

            if(role_code == 'admin-technical-support')
            {
                $('#permission').show();                
            }
            else
            {
                $('#permission').hide();
            } 
        });

        $('#userForm').on('submit', function(e) {

            var Permission =  $('#modules').val();

            console.log(Permission);

            $('#per').val(Permission);

            return true;
        });